==============================================================================
UPUTE ZA TESTIRANJE LAB2A - Poll operacija
==============================================================================

PREDUVJETI:
-----------
1. Kompajlirani kernel modul (shofer.ko)
2. Kompajlirani testni programi (reader i writer)

KORACI ZA TESTIRANJE:
---------------------

1. UČITAJ KERNEL MODUL:
   ---------------------
   cd /home/rene/Documents/nos-lab2/lab2a
   sudo ./load_shofer

   Ova skripta će:
   - Učitati shofer.ko modul
   - Kreirati 6 naprava: /dev/shofer0 do /dev/shofer5

   Za provjeru:
   - lsmod | grep shofer     # Vidi da je modul učitan
   - ls -l /dev/shofer*      # Vidi kreirane naprave


2. POKRENI READER PROGRAM U JEDNOM TERMINALU:
   -------------------------------------------
   cd /home/rene/Documents/nos-lab2/lab2a/test
   ./reader

   Reader će:
   - Otvoriti sve naprave za čitanje
   - Čekati s poll() da se pojavi znak za čitanje
   - Ispisati pročitani znak i broj naprave


3. POKRENI WRITER PROGRAM U DRUGOM TERMINALU:
   -------------------------------------------
   cd /home/rene/Documents/nos-lab2/lab2a/test
   ./writer

   Writer će:
   - Otvoriti sve naprave za pisanje
   - Svakih 5 sekundi s poll() provjeriti spremnost za pisanje
   - Nasumično odabrati jednu spremnu napravu
   - Napisati jedan znak (A-Z ciklički)


4. OČEKIVANO PONAŠANJE:
   ---------------------
   - Writer periodički šalje znakove (A, B, C, ... Z, A, ...)
   - Reader odmah čita i ispisuje te znakove
   - Svaki znak se ispisuje s brojem naprave na koju je napisan

   Primjer izlaza reader programa:
   [shofer2] Pročitano 1 byte(s): 'A'
   [shofer4] Pročitano 1 byte(s): 'B'
   [shofer1] Pročitano 1 byte(s): 'C'

   Primjer izlaza writer programa:
   [shofer2] Napisao znak 'A' (6 spremnih naprava)
   [shofer4] Napisao znak 'B' (6 spremnih naprava)
   [shofer1] Napisao znak 'C' (6 spremnih naprava)


5. ZAUSTAVI PROGRAME:
   ------------------
   U oba terminala pritisni Ctrl+C


6. UKLONI KERNEL MODUL:
   --------------------
   cd /home/rene/Documents/nos-lab2/lab2a
   sudo ./unload_shofer

   Ili ručno:
   sudo rmmod shofer
   sudo rm -f /dev/shofer*


OPCIJE ZA PROGRAME:
-------------------

Reader:
  ./reader [broj_naprava]

  Primjer: ./reader 3  # Koristi samo 3 naprave umjesto 6

Writer:
  ./writer [broj_naprava] [interval_ms]

  Primjer: ./writer 3 2000  # 3 naprave, šalje svakih 2 sekunde


DEBUG:
------
Za omogućavanje debug poruka u modulu, potrebno je:
1. U config.h odkomentirati: #define SHOFER_DEBUG
2. Ponovno kompajlirati modul: make clean && make
3. Nakon učitavanja modula, poruke gledati s: dmesg | tail -f

U modulu se koristi simulate_delay od 1000ms u read/write operacijama.


NAPOMENE:
---------
- Modul kreira 6 naprava i 6 bufffera (round-robin povezani)
- Svaki buffer ima 64 bajta
- Naprave dijele buffere (round-robin)
- poll() u readeru čeka beskonačno (-1 timeout)
- poll() u writeru čeka s timeout-om (5000ms)
- Writer nasumično odabire napravu iz onih spremnih za pisanje

==============================================================================
